generator kysely {
    provider            = "prisma-kysely"
    output              = "./"
    fileName            = "types.ts"
    decimalTypeOverride = "number"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Manufacturer {
    id         String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    name       String      @db.VarChar(50)
    fullName   String?     @db.VarChar(30)
    sockets    Socket[]
    processors Processor[]
    memories   Memory[]
    mouses     Mouse[]
    createdAt  DateTime    @default(now())
    updatedAt  DateTime    @default(now())
}

model Memory {
    id             String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    capacity       Int          @db.SmallInt
    info           MemoryInfo[]
    generation     String       @db.VarChar(4)
    type           String       @db.VarChar(6)
    manufacturerId String       @db.Uuid
    manufacturer   Manufacturer @relation(fields: [manufacturerId], references: [id])
    createdAt      DateTime     @default(now())
    updatedAt      DateTime     @default(now())
}

model MemoryInfo {
    id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    type      String   @db.VarChar(13)
    clock     Int      @db.SmallInt
    tcl       Int?     @db.SmallInt
    trcd      Int?     @db.SmallInt
    trp       Int?     @db.SmallInt
    tras      Int?     @db.SmallInt
    voltage   Decimal? @db.Decimal(5, 4)
    memoryId  String   @db.Uuid
    memory    Memory   @relation(fields: [memoryId], references: [id])
    createdAt DateTime @default(now())
    updatedAt DateTime @default(now())
}

model Mouse {
    id               String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    model            String       @db.VarChar(10)
    sensor           String?      @db.VarChar(8)
    maxDpi           Int          @db.SmallInt
    dpiSteps         Int[]        @db.SmallInt
    variableDpi      Boolean      @default(false)
    ips              Int?         @db.SmallInt
    buttons          Int?         @db.SmallInt
    weight           Int?         @db.SmallInt
    programmable     Boolean      @default(false)
    acceleration     Int?         @db.SmallInt
    wireless         Boolean      @default(false)
    wirelessType     String?      @db.VarChar(9)
    polling          Int[]        @default([125]) @db.SmallInt
    switch           String?      @db.VarChar(20)
    batteryCapacity  Int?         @db.SmallInt
    batteryLife      Int[]        @db.SmallInt
    chargingTime     Int?         @db.SmallInt
    chargingPort     String?      @db.VarChar(9)
    wirelessCharging String?      @db.VarChar(38)
    dimensions       Decimal[]    @db.Decimal(5, 2)
    manufacturerId   String       @db.Uuid
    manufacturer     Manufacturer @relation(fields: [manufacturerId], references: [id])
    createdAt        DateTime     @default(now())
    updatedAt        DateTime     @default(now())
}

model Processor {
    id               String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    model            String              @db.VarChar(10)
    codename         String?             @db.VarChar(17)
    architecture     String?             @db.VarChar(10)
    brand            String              @db.VarChar(22)
    socketId         String              @db.Uuid
    socket           Socket              @relation(fields: [socketId], references: [id])
    coreInfo         ProcessorCoreInfo[]
    l1Cache          Int?                @db.Integer
    l2Cache          Int?                @db.Integer
    l3Cache          Int                 @db.Integer
    litography       String              @db.VarChar(15)
    maxMemory        Int?                @db.SmallInt
    memoryChannels   Int                 @default(2) @db.SmallInt
    memorySpeed      Int[]               @db.SmallInt
    memoryGeneration String[]            @db.VarChar(4)
    usbPorts         ProcessorUsbInfo[]
    pcieVersion      String              @default("4.0") @db.VarChar(4)
    pcieLanes        Int[]               @db.SmallInt
    tdp              Int                 @db.SmallInt
    releaseDate      DateTime?           @db.Date
    msrp             Int?                @db.SmallInt
    manufacturerId   String              @db.Uuid
    manufacturer     Manufacturer        @relation(fields: [manufacturerId], references: [id])
    createdAt        DateTime            @default(now())
    updatedAt        DateTime            @default(now())
}

model ProcessorCoreInfo {
    id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    type        String?   @db.Char(2)
    coreCount   Int       @db.SmallInt
    threadCount Int       @db.SmallInt
    baseClock   Decimal   @db.Decimal(3, 1)
    boostClock  Decimal   @db.Decimal(3, 1)
    processorId String    @db.Uuid
    processor   Processor @relation(fields: [processorId], references: [id])
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @default(now())
}

model ProcessorUsbInfo {
    id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    type        String    @db.VarChar(15)
    amount      Int       @db.SmallInt
    processorId String    @db.Uuid
    processor   Processor @relation(fields: [processorId], references: [id])
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @default(now())
}

model Socket {
    id            String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    name          String       @db.VarChar(10)
    alternateName String?      @db.VarChar(10)
    processors    Processor[]
    launchDate    DateTime?    @db.Date
    companyId     String       @db.Uuid
    company       Manufacturer @relation(fields: [companyId], references: [id])
    createdAt     DateTime     @default(now())
    updatedAt     DateTime     @default(now())
}
